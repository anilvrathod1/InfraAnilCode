{
  "version": "tree-0.1",
  "tree": {
    "id": "App",
    "path": "",
    "children": {
      "Tree": {
        "id": "Tree",
        "path": "Tree"
      },
      "mynetwork": {
        "id": "mynetwork",
        "path": "mynetwork",
        "children": {
          "VPC": {
            "id": "VPC",
            "path": "mynetwork/VPC",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::VPC",
              "aws:cdk:cloudformation:props": {
                "cidrBlock": "10.0.0.0/16",
                "enableDnsHostnames": true,
                "enableDnsSupport": true,
                "instanceTenancy": "default",
                "tags": [
                  {
                    "key": "Name",
                    "value": "vpc"
                  }
                ]
              }
            }
          },
          "internetgateway": {
            "id": "internetgateway",
            "path": "mynetwork/internetgateway",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::InternetGateway",
              "aws:cdk:cloudformation:props": {
                "tags": [
                  {
                    "key": "Name",
                    "value": "internetgateway"
                  }
                ]
              }
            }
          },
          "VPCGatewayAttachment": {
            "id": "VPCGatewayAttachment",
            "path": "mynetwork/VPCGatewayAttachment",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::VPCGatewayAttachment",
              "aws:cdk:cloudformation:props": {
                "vpcId": {
                  "Ref": "VPC"
                },
                "internetGatewayId": {
                  "Ref": "internetgateway"
                }
              }
            }
          },
          "NetworkAcl": {
            "id": "NetworkAcl",
            "path": "mynetwork/NetworkAcl",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::NetworkAcl",
              "aws:cdk:cloudformation:props": {
                "vpcId": {
                  "Ref": "VPC"
                },
                "tags": [
                  {
                    "key": "Name",
                    "value": "networkacl"
                  }
                ]
              }
            }
          },
          "NetworkAclEntry01": {
            "id": "NetworkAclEntry01",
            "path": "mynetwork/NetworkAclEntry01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::NetworkAclEntry",
              "aws:cdk:cloudformation:props": {
                "networkAclId": {
                  "Ref": "NetworkAcl"
                },
                "protocol": -1,
                "ruleAction": "allow",
                "ruleNumber": 100,
                "cidrBlock": "0.0.0.0/0",
                "egress": true
              }
            }
          },
          "NetworkAclEntry03": {
            "id": "NetworkAclEntry03",
            "path": "mynetwork/NetworkAclEntry03",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::NetworkAclEntry",
              "aws:cdk:cloudformation:props": {
                "networkAclId": {
                  "Ref": "NetworkAcl"
                },
                "protocol": -1,
                "ruleAction": "allow",
                "ruleNumber": 100,
                "cidrBlock": "0.0.0.0/0",
                "egress": false
              }
            }
          },
          "publicsubnet01": {
            "id": "publicsubnet01",
            "path": "mynetwork/publicsubnet01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
              "aws:cdk:cloudformation:props": {
                "cidrBlock": "10.0.0.0/24",
                "vpcId": {
                  "Ref": "VPC"
                },
                "availabilityZone": "ap-northeast-1a",
                "tags": [
                  {
                    "key": "Name",
                    "value": "publicsubnet01"
                  }
                ]
              }
            }
          },
          "publicroutetable01": {
            "id": "publicroutetable01",
            "path": "mynetwork/publicroutetable01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
              "aws:cdk:cloudformation:props": {
                "vpcId": {
                  "Ref": "VPC"
                },
                "tags": [
                  {
                    "key": "Name",
                    "value": "publicroutetable01"
                  }
                ]
              }
            }
          },
          "publicroute01": {
            "id": "publicroute01",
            "path": "mynetwork/publicroute01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::Route",
              "aws:cdk:cloudformation:props": {
                "routeTableId": {
                  "Ref": "publicroutetable01"
                },
                "destinationCidrBlock": "0.0.0.0/0",
                "gatewayId": {
                  "Ref": "internetgateway"
                }
              }
            }
          },
          "publicsubnetroutetableassociation01": {
            "id": "publicsubnetroutetableassociation01",
            "path": "mynetwork/publicsubnetroutetableassociation01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
              "aws:cdk:cloudformation:props": {
                "routeTableId": {
                  "Ref": "publicroutetable01"
                },
                "subnetId": {
                  "Ref": "publicsubnet01"
                }
              }
            }
          },
          "publicSubnetNetworkAclAssociation01": {
            "id": "publicSubnetNetworkAclAssociation01",
            "path": "mynetwork/publicSubnetNetworkAclAssociation01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SubnetNetworkAclAssociation",
              "aws:cdk:cloudformation:props": {
                "networkAclId": {
                  "Ref": "NetworkAcl"
                },
                "subnetId": {
                  "Ref": "publicsubnet01"
                }
              }
            }
          },
          "privatesubnet01": {
            "id": "privatesubnet01",
            "path": "mynetwork/privatesubnet01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
              "aws:cdk:cloudformation:props": {
                "cidrBlock": "10.0.11.0/24",
                "vpcId": {
                  "Ref": "VPC"
                },
                "availabilityZone": "ap-northeast-1a",
                "tags": [
                  {
                    "key": "Name",
                    "value": "privatesubnet01"
                  }
                ]
              }
            }
          },
          "privateroutetable01": {
            "id": "privateroutetable01",
            "path": "mynetwork/privateroutetable01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
              "aws:cdk:cloudformation:props": {
                "vpcId": {
                  "Ref": "VPC"
                },
                "tags": [
                  {
                    "key": "Name",
                    "value": "privateroutetable01"
                  }
                ]
              }
            }
          },
          "privatesubnetroutetableassociation01": {
            "id": "privatesubnetroutetableassociation01",
            "path": "mynetwork/privatesubnetroutetableassociation01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
              "aws:cdk:cloudformation:props": {
                "routeTableId": {
                  "Ref": "privateroutetable01"
                },
                "subnetId": {
                  "Ref": "privatesubnet01"
                }
              }
            }
          },
          "eip01": {
            "id": "eip01",
            "path": "mynetwork/eip01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::EIP",
              "aws:cdk:cloudformation:props": {
                "tags": [
                  {
                    "key": "Name",
                    "value": "eip01"
                  }
                ]
              }
            }
          },
          "natgateway01": {
            "id": "natgateway01",
            "path": "mynetwork/natgateway01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::NatGateway",
              "aws:cdk:cloudformation:props": {
                "allocationId": {
                  "Fn::GetAtt": [
                    "eip01",
                    "AllocationId"
                  ]
                },
                "subnetId": {
                  "Ref": "publicsubnet01"
                },
                "tags": [
                  {
                    "key": "Name",
                    "value": "natgateway01"
                  }
                ]
              }
            }
          },
          "privateroute01": {
            "id": "privateroute01",
            "path": "mynetwork/privateroute01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::Route",
              "aws:cdk:cloudformation:props": {
                "routeTableId": {
                  "Ref": "privateroutetable01"
                },
                "destinationCidrBlock": "0.0.0.0/0",
                "natGatewayId": {
                  "Ref": "natgateway01"
                }
              }
            }
          },
          "privateSubnetNetworkAclAssociation01": {
            "id": "privateSubnetNetworkAclAssociation01",
            "path": "mynetwork/privateSubnetNetworkAclAssociation01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SubnetNetworkAclAssociation",
              "aws:cdk:cloudformation:props": {
                "networkAclId": {
                  "Ref": "NetworkAcl"
                },
                "subnetId": {
                  "Ref": "privatesubnet01"
                }
              }
            }
          },
          "output01": {
            "id": "output01",
            "path": "mynetwork/output01"
          }
        }
      },
      "mysecurity": {
        "id": "mysecurity",
        "path": "mysecurity",
        "children": {
          "publicsecuritygroup01": {
            "id": "publicsecuritygroup01",
            "path": "mysecurity/publicsecuritygroup01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
              "aws:cdk:cloudformation:props": {
                "groupDescription": "publicsecuritygroup",
                "groupName": "publicsecuritygroup01",
                "tags": [
                  {
                    "key": "Name",
                    "value": "publicsecuritygroup01"
                  }
                ],
                "vpcId": {
                  "Fn::ImportValue": "vpcid01"
                }
              }
            }
          },
          "privatesecuritygroup01": {
            "id": "privatesecuritygroup01",
            "path": "mysecurity/privatesecuritygroup01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
              "aws:cdk:cloudformation:props": {
                "groupDescription": "privatesecuritygroup",
                "groupName": "privatesecuritygroup01",
                "tags": [
                  {
                    "key": "Name",
                    "value": "privatesecuritygroup01"
                  }
                ],
                "vpcId": {
                  "Fn::ImportValue": "vpcid01"
                }
              }
            }
          },
          "publicsecuritygroupingress01": {
            "id": "publicsecuritygroupingress01",
            "path": "mysecurity/publicsecuritygroupingress01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
              "aws:cdk:cloudformation:props": {
                "ipProtocol": "tcp",
                "cidrIp": "0.0.0.0/0",
                "description": "for bastion",
                "fromPort": 22,
                "groupId": {
                  "Ref": "publicsecuritygroup01"
                },
                "toPort": 22
              }
            }
          },
          "publicsecuritygroupegress01": {
            "id": "publicsecuritygroupegress01",
            "path": "mysecurity/publicsecuritygroupegress01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupEgress",
              "aws:cdk:cloudformation:props": {
                "groupId": {
                  "Ref": "publicsecuritygroup01"
                },
                "ipProtocol": "tcp",
                "description": "for private",
                "destinationSecurityGroupId": {
                  "Ref": "privatesecuritygroup01"
                },
                "fromPort": 22,
                "toPort": 22
              }
            }
          },
          "privatesecuritygroupingress01": {
            "id": "privatesecuritygroupingress01",
            "path": "mysecurity/privatesecuritygroupingress01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
              "aws:cdk:cloudformation:props": {
                "ipProtocol": "tcp",
                "description": "for bastion",
                "fromPort": 22,
                "groupId": {
                  "Ref": "privatesecuritygroup01"
                },
                "sourceSecurityGroupId": {
                  "Ref": "publicsecuritygroup01"
                },
                "toPort": 22
              }
            }
          },
          "privatesecuritygroupegress01": {
            "id": "privatesecuritygroupegress01",
            "path": "mysecurity/privatesecuritygroupegress01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupEgress",
              "aws:cdk:cloudformation:props": {
                "groupId": {
                  "Ref": "privatesecuritygroup01"
                },
                "ipProtocol": "tcp",
                "cidrIp": "0.0.0.0/0",
                "description": "for 443",
                "fromPort": 443,
                "toPort": 443
              }
            }
          },
          "privatesecuritygroupegress02": {
            "id": "privatesecuritygroupegress02",
            "path": "mysecurity/privatesecuritygroupegress02",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupEgress",
              "aws:cdk:cloudformation:props": {
                "groupId": {
                  "Ref": "privatesecuritygroup01"
                },
                "ipProtocol": "tcp",
                "cidrIp": "0.0.0.0/0",
                "description": "for 80",
                "fromPort": 80,
                "toPort": 80
              }
            }
          },
          "privatesecuritygroupegress03": {
            "id": "privatesecuritygroupegress03",
            "path": "mysecurity/privatesecuritygroupegress03",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupEgress",
              "aws:cdk:cloudformation:props": {
                "groupId": {
                  "Ref": "privatesecuritygroup01"
                },
                "ipProtocol": "tcp",
                "cidrIp": "0.0.0.0/0",
                "description": "for 22",
                "fromPort": 22,
                "toPort": 22
              }
            }
          }
        }
      },
      "myec2": {
        "id": "myec2",
        "path": "myec2",
        "children": {
          "template01": {
            "id": "template01",
            "path": "myec2/template01",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::LaunchTemplate",
              "aws:cdk:cloudformation:props": {
                "launchTemplateName": "template01"
              }
            }
          }
        }
      }
    }
  }
}